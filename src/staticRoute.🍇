ğŸ“—
	A route that handles GET requests for files.
ğŸ“—
ğŸ‡ ğŸ“ ğŸ‡
	ğŸŠ ğŸ›£

	ğŸ“—
		Panics if anything is wrong with the input.
	ğŸ“—
	ğŸ‡ğŸ”’â— ğŸ’¥ prefixğŸ¬ğŸ”¡ rootğŸ”¡ ğŸ‡
		ğŸ’­ Panic if the prefix is not a directory
		â†ª prefix â¡ p ğŸ‡
			â†ª âğŸ¼p ğŸ”¤/ğŸ”¤â—â— ğŸ‡
				ğŸ¤¯ğŸ‡ğŸ’» ğŸ”¤Prefix ğŸ§²pğŸ§² does not start with a "/"ğŸ”¤â—
			ğŸ‰
		ğŸ‰
		ğŸ’­ Panic if root does not exist
		â†ª âğŸ“œğŸ•ŠğŸ“‘ rootâ—â— ğŸ‡
			ğŸ¤¯ğŸ‡ğŸ’» ğŸ”¤Path ğŸ§²rootğŸ§² does not existğŸ”¤â—
		ğŸ‰
	ğŸ‰

	ğŸ“—
		Returns the path to an existing file, or nothing.
	ğŸ“—
	ğŸ‡ğŸ”’â— ğŸ“‚ pathğŸ”¡ â¡ ğŸ¬ğŸ”¡ ğŸ‡
		ğŸ”¡pathâ— â¡ ğŸ–ğŸ†• p
		ğŸ’­ If it's a directory, add index.html
		â†ª â›³p ğŸ”¤/ğŸ”¤â— ğŸ‡
			ğŸ”¤ğŸ§²pğŸ§²index.htmlğŸ”¤ â¡ ğŸ– p
		ğŸ‰
		ğŸ’­ If it exists, return it
		â†ª ğŸ“œğŸ•ŠğŸ“‘ pathâ— ğŸ‡
			â†© p
		ğŸ‰
		ğŸ’­ Otherwise, return nothing
		â†© ğŸ¤·
	ğŸ‰

	ğŸ–ğŸ†• prefixğŸ¬ğŸ”¡
	ğŸ–ğŸ†• rootğŸ”¡

	ğŸ“—
		Serves any GET request with contents from `root`.
	ğŸ“—
	ğŸ†• ğŸ¼rootğŸ”¡ ğŸ‡
		ğŸ’¥ğŸ‡ğŸ“ prefix rootâ—
	ğŸ‰
	ğŸ“—
		Serves GET request with the prefix `prefix` with contents from `root`.
	ğŸ“—
	ğŸ†• ğŸ¼prefixğŸ”¡ ğŸ¼rootğŸ”¡ ğŸ‡
		ğŸ’¥ğŸ‡ğŸ“ prefix rootâ—
	ğŸ‰

	â“ğŸ‘£ requestğŸ“¥ â¡ ğŸ‘Œ ğŸ‡
		ğŸ’­ Only handle GET requests
		â†ª âğŸš‡requestâ“ ğŸ™Œ ğŸ”¤GETğŸ”¤â— ğŸ‡
			â†© ğŸ‘
		ğŸ‰

		ğŸ›¤requestâ“ â¡ ğŸ–ğŸ†• path
		ğŸ’­ Only handle requests with a path that starts with `prefix`
		â†ª prefix â¡ p ğŸ‡
			â†ª âğŸ¼path pâ—â— ğŸ‡
				â†© ğŸ‘
			ğŸ‰
			ğŸ”ªpath ğŸ“pâ— ğŸ“pathâ— â– ğŸ“pâ—â— â¡ ğŸ– path
		ğŸ‰

		ğŸ’­ Only handle requests for files that exist
		ğŸ”¤ğŸ§²rootğŸ§²/ğŸ§²pathğŸ§²ğŸ”¤ â¡ ğŸ– path
		â†ª ğŸ“‚ğŸ‡ğŸ“ pathâ— ğŸ™Œ ğŸ¤· ğŸ‡
			â†© ğŸ‘
		ğŸ‰

		ğŸ’­ If all tests pass, we can serve the file
		â†© ğŸ‘
	ğŸ‰

	â—ğŸ‘£ requestğŸ“¥ â¡ ğŸ“¤ ğŸ‡
		ğŸ’­ Here we can assume everything is OK and serve the file

		ğŸ›¤requestâ“ â¡ ğŸ–ğŸ†• path
		ğŸ’­ Remove possible prefix from the path
		â†ª prefix â¡ p ğŸ‡
			ğŸ“pâ— â¡ pLength
			ğŸ“pathâ— â¡ pathLength
			pathLength â– pLength â¡ restLength
			ğŸ”ªpath pLength restLengthâ— â¡ ğŸ– path
		ğŸ‰

		ğŸ’­ Only handle requests for files that exist
		ğŸ”¤ğŸ§²rootğŸ§²/ğŸ§²pathğŸ§²ğŸ”¤ â¡ ğŸ– path
		ğŸºğŸ“‚ğŸ‡ğŸ“ pathâ— â¡ ğŸ– path

		ğŸ’­ Serve the file
		ğŸ†— response ğŸ“„ğŸ‡ğŸ“¤ pathâ— ğŸ‡
			â†© response
		ğŸ‰
		ğŸ™… error ğŸ‡
			ğŸ˜€ğŸ”¤Error reading file (ğŸ§²pathğŸ§²): ğŸ§²ğŸ’¬errorâ—ğŸ§²ğŸ”¤â—
			â†© ğŸ‘¿ğŸ‡ğŸ“¤â—
		ğŸ‰
	ğŸ‰
ğŸ‰
